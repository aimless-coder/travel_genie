import { GoogleGenerativeAI } from "@google/generative-ai"

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};


 export const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: 'Generate a structured travel itinerary in JSON format for Location: New Delhi, for 4 Days for a Couple with a moderate budget. Start by providing a brief description of New Delhi that highlights its cultural, historical, and tourist significance within 50-70 words. Then, create an itinerary where each day\'s plan is optimized so that all the places visited are in close proximity to one another, minimizing travel time. The JSON output should include the keys: "location", "description", "duration", "numberOfPeople", "budget", and "itinerary". The "itinerary" should be an array in which each element represents a day\'s plan in sequence containing a "dayNumber", a "theme" for that day, and a "places" array. Each object within the "places" array must include "placeName", "placeDetails", "ticketPricing", "bestTimeToVisit" (time range in HH:MM am/pm format), and "travelMode" (e.g., Walk, Taxi, Public Transport).Importantly, ensure that each day\'s itinerary includes exactly three main activities and one food break (either lunch or dinner) at a recommended restaurant that aligns with the specified budget.  Whenever possible, suggest recommended restaurants and special places that offer unique or exceptional experiences, including details on why these recommendations are noteworthy. Ensure the itinerary provides a balanced mix of sightseeing, leisure, and food breaks while staying within the specified budget, and includes a diverse range of historical, cultural, natural, and entertainment attractions relevant to New Delhi.'},
        ],
      },
      {
        role: "model",
        parts: [
          {text: ' \n{ "tripDetail ":{\n  "location": "New Delhi",\n  "description": "New Delhi, India\'s capital, is a vibrant metropolis blending ancient Mughal heritage with modern infrastructure. It\'s a historical treasure trove with iconic landmarks, diverse cultures, and bustling markets.",\n  "duration": "4 Days",\n  "numberOfPeople": "2",\n  "budget": "Moderate",\n    "itinerary": [\n        {\n            "dayNumber": 1,\n            "theme": "Old Delhi Exploration & Culinary Delights",\n            "places": [\n                {\n                    "placeName": "Jama Masjid",\n                     "placeDetails": "One of India\'s largest mosques, built by Mughal emperor Shah Jahan. Marvel at its grand architecture and experience the spiritual atmosphere.",\n                    "ticketPricing": "Free (small fee for photography)",\n                    "bestTimeToVisit": "08:00 am - 11:00 am",\n                    "travelMode": "Taxi/Auto"\n\n                },\n               {\n                    "placeName": "Chandni Chowk",\n                    "placeDetails": "A bustling, chaotic market offering diverse goods, street food, and a glimpse into Old Delhi\'s daily life. Explore the narrow lanes and soak in the vibrant atmosphere.",\n                    "ticketPricing": "Free",\n                    "bestTimeToVisit": "10:00 am - 01:00 pm",\n                    "travelMode": "Walk/Cycle Rickshaw"\n\n                },\n                 {\n                    "placeName": "Red Fort (Lal Qila)",\n                    "placeDetails": "A magnificent Mughal fort, a UNESCO World Heritage site. Explore its palatial structures and learn about its historical significance.",\n                    "ticketPricing": "INR 60 (Indian) / INR 800 (Foreigner)",\n                     "bestTimeToVisit": "02:00 pm - 05:00 pm",\n                     "travelMode":"Walk"\n                },\n              {\n                    "placeName": "Karim\'s",\n                    "placeDetails": "A legendary restaurant in Old Delhi renowned for its Mughlai cuisine, especially its flavorful kebabs and biryanis. A must-visit for food lovers.",\n                    "ticketPricing":"INR 800-1200 for two",\n                    "bestTimeToVisit": "06:30 pm - 08:00 pm",\n                     "travelMode": "Cycle Rickshaw/Taxi"\n                }\n            ]\n        },\n        {\n            "dayNumber": 2,\n            "theme": "Imperial Delhi & Spiritual Serenity",\n             "places": [\n                {\n                    "placeName": "Humayun\'s Tomb",\n                    "placeDetails": "A stunning precursor to the Taj Mahal, a Mughal architectural masterpiece set amidst beautiful gardens. Explore its intricate designs and serene surroundings.",\n                    "ticketPricing": "INR 40 (Indian) / INR 600 (Foreigner)",\n                    "bestTimeToVisit": "09:00 am - 11:00 am",\n                     "travelMode": "Taxi/Auto"\n\n                },\n                {\n                    "placeName": "Lodhi Garden",\n                      "placeDetails": "A peaceful garden with historical tombs and lush greenery. Take a relaxing stroll and admire the architectural relics amidst nature.",\n                    "ticketPricing": "Free",\n                    "bestTimeToVisit": "11:30 am - 01:30 pm",\n                     "travelMode": "Taxi/Auto"\n\n                },\n                {\n                    "placeName": "Akshardham Temple",\n                      "placeDetails": "A modern Hindu temple showcasing intricate carvings and architectural grandeur. Experience the spiritual atmosphere and learn about its cultural significance.",\n                    "ticketPricing":"Free (Exhibition/Boat ride at an additional cost)",\n                    "bestTimeToVisit":"03:00 pm - 06:00 pm",\n                     "travelMode":"Taxi/Metro"\n                 },\n                 {\n                    "placeName": "Indian Accent",\n                    "placeDetails": "An acclaimed restaurant offering a modern and innovative take on Indian cuisine, perfect for a fine dining experience. A little splurge but very worthwhile.",\n                    "ticketPricing": "INR 3000 - 5000 for two",\n                     "bestTimeToVisit": "07:30 pm - 09:00 pm",\n                    "travelMode":"Taxi"\n                }\n\n            ]\n        },\n         {\n            "dayNumber": 3,\n            "theme": "Modern Delhi & Artistic Expressions",\n             "places": [\n                {\n                    "placeName": "Qutub Minar",\n                    "placeDetails": "A towering minaret showcasing Indo-Islamic architecture, a UNESCO World Heritage site. Explore the complex and learn about its historical significance.",\n                     "ticketPricing":"INR 40 (Indian) / INR 600 (Foreigner)",\n                    "bestTimeToVisit":"09:00 am - 11:00 am",\n                     "travelMode": "Taxi/Metro"\n                },\n                {\n                    "placeName": "Hauz Khas Village",\n                     "placeDetails": "A trendy urban village with a historic fort, lake, and art galleries.  Explore the boutiques, cafes, and enjoy the hip vibe.",\n                    "ticketPricing": "Free",\n                   "bestTimeToVisit":"11:30 am - 02:00 pm",\n                     "travelMode": "Taxi/Auto"\n                },\n                {\n                    "placeName": "National Museum",\n                    "placeDetails": "Showcases Indiaâ€™s vast history and art through artifacts, sculptures, and historical displays. An excellent place to dive into the country\'s heritage.",\n                    "ticketPricing":"INR 20 (Indian) / INR 650 (Foreigner)",\n                    "bestTimeToVisit":"02:30 pm - 05:00 pm",\n                    "travelMode":"Taxi/Metro"\n                 },\n                {\n                    "placeName": "Saravana Bhavan",\n                     "placeDetails":"A popular South Indian vegetarian restaurant chain offering delicious and authentic dishes at affordable prices. A great option for a budget friendly meal.",\n                    "ticketPricing":"INR 600 - 800 for two",\n                    "bestTimeToVisit": "07:00 pm - 08:30 pm",\n                    "travelMode": "Taxi"\n                }\n            ]\n         },\n         {\n            "dayNumber": 4,\n            "theme": "Colonial History and Leisure",\n            "places": [\n               {\n                  "placeName": "India Gate",\n                   "placeDetails":"A war memorial arch commemorating Indian soldiers, set amidst lush gardens. A great place for an evening stroll and photo opportunities",\n                 "ticketPricing":"Free",\n                    "bestTimeToVisit": "09:00 am - 10:30 am",\n                   "travelMode":"Taxi/Auto"\n\n                },\n                {\n                    "placeName": "Rajpath",\n                   "placeDetails":"A ceremonial boulevard connecting India Gate with Rashtrapati Bhavan, used for parades. Take a walk or cycle ride along this historic avenue.",\n                    "ticketPricing":"Free",\n                    "bestTimeToVisit": "10:30 am - 12:30 pm",\n                   "travelMode":"Walk/Cycle"\n                 },\n\n                 {\n                   "placeName":"Connaught Place",\n                    "placeDetails": "A bustling shopping and business hub with colonial-era architecture. Explore the shops, cafes and soak in the urban vibe. Perfect for some souvenir shopping before departure",\n                     "ticketPricing":"Free",\n                     "bestTimeToVisit":"01:00 pm - 03:00 pm",\n                     "travelMode":"Walk/Taxi"\n                },\n\n                {\n                    "placeName":"United Coffee House",\n                     "placeDetails":"A legendary restaurant in Connaught Place, known for its elegant ambiance and delicious food. Perfect for a leisurely lunch with a colonial-era vibe.",\n                    "ticketPricing":"INR 1200 - 1800 for two",\n                    "bestTimeToVisit":"03:30 pm - 05:00 pm",\n                    "travelMode":"Walk"\n                  }\n           ]\n        }\n    ]\n}}\n'}
        ],
      },
    ],
  });
